<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NextBus - SEMECTI</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/ae360af17e.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="icon" type="image/x-icon" href="static/img/logoprefNav.png" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>

<body>
    <div class="wrapper">
        <aside id="sidebar" class="js-sidebar">
            <div class="h-100">
                <div class="sidebar-logo">
                    <a href="#" onclick="location.reload(); return false;"><img src="static/img/busOrange.png" style="width: 30px; height: 30px; margin-right: 8px;">NextBus</a>
                </div>                
                <ul class="sidebar-nav">
                    <li class="sidebar-header">Menu</li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link tab-link" data-tab="todosdados">
                            <i class="fa-solid fa-list pe-2"></i> <strong>IN√çCIO</strong>
                        </a>
                    </li>
                </ul>
    
                <ul class="sidebar-nav">
                    <li class="sidebar-header">EMEB</li>
                
                    <!-- EMEBS -->
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-target="#Chiozo" data-bs-toggle="collapse">
                            <i class="fa-solid fa-school pe-2"></i></i> <strong>EMEB CHIOZO</strong>
                        </a>
                        <ul id="Chiozo" class="sidebar-dropdown list-unstyled collapse">
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link tab-link" data-tab="ChiozoAlunos">„Ö§„Ö§„Ö§- Alunos </a>
                            </li>
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link tab-link" data-tab="ChiozoOcorrencias">„Ö§„Ö§„Ö§- Ocorr√™ncias </a>
                            </li>
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link tab-link" data-tab="ChiozoFrequencia">„Ö§„Ö§„Ö§- Frequ√™ncia</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-target="#ItaloAdami" data-bs-toggle="collapse">
                            <i class="fa-solid fa-school pe-2"></i> <strong>EMEB ITALO ADAMI</strong>
                        </a>
                        <ul id="ItaloAdami" class="sidebar-dropdown list-unstyled collapse">
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link tab-link" data-tab="ItaloAdamiAlunos">„Ö§„Ö§„Ö§- Alunos</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link tab-link" data-tab="ItaloAdamiOcorrencias">„Ö§„Ö§„Ö§- Ocorr√™ncias</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link tab-link" data-tab="ItaloAdamiFrequencia">„Ö§„Ö§„Ö§- Frequ√™ncia</a>
                            </li>
                        </ul>
                    </li>
                </ul> 
            </div>
        </aside>
        
        
        <!--MENU SIDEBAR-->
        <div class="main">
            <nav class="navbar navbar-expand px-3 border-bottom">
                <button class="btn btn-dark" id="sidebar-toggle" type="button">
                    <span class="navbar-toggler-icon"></span>
                </button>                
                <div class="navbar-collapse navbar">
                    <ul class="navbar-nav">
                        <li class="nav-item dropdown d-flex align-items-center">
                            <!-- √çcone de notifica√ß√µes com contador -->
                            <a href="#" data-bs-toggle="dropdown" class="nav-icon pe-md-2 position-relative">
                                <i class="fa-solid fa-bell" style="font-size: 30px; color: blue;"></i>
                                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" 
                                      style="font-size: 10px; padding: 4px 6px; transform: translate(-50%, -50%);">
                                    2
                                </span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end p-3" style="min-width: 250px; overflow-y: auto; max-height: 250px;">
                                <div id="notifications">
                                    <div class="d-flex align-items-start pb-2 mb-2 border-bottom">
                                        <i class="fa-solid fa-exclamation-circle text-warning me-2"></i>
                                        <div>
                                            <p class="mb-0 fw-bold">Ocorr√™ncia.</p>
                                            <small class="text-muted">Ocorr√™ncia na escola Chiozo.</small><br>
                                            <small class="text-muted">üìÖ 06/04/2025</small>
                                            <small class="text-muted">‚è∞ 14:30</small>
                                        </div>
                                    </div>
                                    <div class="d-flex align-items-start pb-2 mb-2 border-bottom">
                                        <i class="fa-solid fa-exclamation-circle text-warning me-2"></i>
                                        <div>
                                            <p class="mb-0 fw-bold">Ocorr√™ncia.</p>
                                            <small class="text-muted">Ocorr√™ncia na escola Michel Alves.</small><br>
                                            <small class="text-muted">üìÖ 03/04/2025</small>
                                            <small class="text-muted">‚è∞ 09:15</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
            
                            <!-- √çcone do usu√°rio -->
                            <a href="#" data-bs-toggle="dropdown" class="nav-icon pe-md-0 ms-3">
                                <img src="static/img/user.png" class="avatar img-fluid rounded" alt="" style="width: 32px; height: 32px;">
                            </a>
                            <div class="d-flex flex-column">
                                <span class="fw-bold" style="font-size: 16px;">Raul Guilherme</span>
                                <span class="text-muted" style="font-size: 12px;">Admin</span>
                            </div>                            
                            <a href="#" data-bs-toggle="dropdown" class="nav-icon pe-md-0 ms-2">
                                <i class="bi bi-caret-down-fill"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end">
                                <a href="#" class="dropdown-item" id="logout-link">Sair</a>
                            </div>                           
                        </li>
                    </ul>
                </div>                       
            </nav>                                    
            <script>
                document.addEventListener("DOMContentLoaded", function () {
                    document.querySelectorAll(".fa-exclamation-circle").forEach(icon => {
                        icon.addEventListener("click", function () {
                            let notification = this.closest(".d-flex.align-items-start");
                            if (notification) {
                                notification.remove();
            
                                // Atualiza o contador de notifica√ß√µes
                                let badge = document.querySelector(".badge.bg-danger");
                                if (badge) {
                                    let count = parseInt(badge.textContent, 10);
                                    count = isNaN(count) ? 0 : count - 1;
                                    if (count > 0) {
                                        badge.textContent = count;
                                    } else {
                                        badge.remove();
                                    }
                                }
                            }
                        });
                    });
                });
                document.getElementById("logout-link").addEventListener("click", function(event) {
                event.preventDefault(); // Evita o comportamento padr√£o do link
                window.location.href = "login.html"; // Redireciona para a p√°gina de login
            });
            </script>


            <!-- Conte√∫do das Abas -->
            <div class="container-fluid">
                <div class="tab-content">
                    
                    
                    
                    <!-- INICIO -->
                    <div id="todosdados" class="tab-pane fade show active">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="info-pages mb-7">
                                    <h3 class=""><strong>üöç TRANSPORTE ESCOLAR</strong></h3>
                                    <p class="h6">NextBus /<span> In√≠cio</span></p>
                                </div>
                                
                                <div class="introduction">
                                    <p>üëã Seja muito bem-vindo ao sistema de transporte escolar! Aqui, voc√™ encontrar√° todas as ferramentas necess√°rias para gerenciar e acompanhar as opera√ß√µes di√°rias relacionadas ao transporte dos alunos.</p>
                                
                                    <p>üîç No menu lateral √† esquerda, voc√™ ver√° a escola pela qual √© respons√°vel. Ao selecion√°-la, ter√° acesso a informa√ß√µes detalhadas sobre todos os roteiros dos √¥nibus üöå, incluindo quais alunos est√£o atribu√≠dos a cada ve√≠culo, facilitando a organiza√ß√£o e supervis√£o do transporte escolar.</p>
                                
                                    <p>‚ö†Ô∏è Al√©m do gerenciamento dos roteiros e alunos, h√° tamb√©m a aba de <strong>Ocorr√™ncias</strong>. Nesta se√ß√£o, voc√™ pode registrar qualquer situa√ß√£o fora do comum que aconte√ßa durante os trajetos, como atrasos, problemas mec√¢nicos, comportamento inadequado dos alunos ou qualquer outro evento relevante. Essas informa√ß√µes s√£o essenciais para garantir a seguran√ßa e a efici√™ncia do transporte.</p>
                                
                                    <p>üìä Para oferecer uma vis√£o geral do sistema, disponibilizamos abaixo um <strong>dashboard interativo</strong> com estat√≠sticas e dados importantes sobre o transporte escolar. Aqui, voc√™ pode visualizar informa√ß√µes como a quantidade de alunos transportados, n√∫mero de ocorr√™ncias registradas e at√© mesmo o desempenho de cada rota.</p>
                                
                                    <p>‚ùì Em caso de d√∫vidas ou necessidade de suporte, sinta-se √† vontade para entrar em contato com o Raul. Ele estar√° dispon√≠vel para auxili√°-lo no que for preciso.</p>
                                
                                    <p>üöÄ Explore o sistema e aproveite ao m√°ximo todas as funcionalidades dispon√≠veis para tornar o transporte escolar mais organizado, seguro e eficiente!</p>
                                </div>                                
                            </div>
                            <div class="row my-3">
                                <div class="box d-flex align-items-center justify-content-between my-2 w-100">
                                    <div class="cards">
                                        <div class="icon alunosTransportados">
                                            <i class="fa-solid fa-children"></i>
                                        </div>
                                        <div class="desc">
                                            <h6 class="text-muted"><strong>Alunos transportados</strong></h6>
                                            <h5 class="">9200 alunos</h5>
                                        </div>
                                    </div>
                                    <div class="cards">
                                        <div class="icon escolasEnvolvidas">
                                            <i class="fa-solid fa-school"></i>
                                        </div>
                                        <div class="desc">
                                            <h6 class="text-muted"><strong>Escolas</strong></h6>
                                            <h5 class="">42 escolas</h5>
                                        </div>
                                    </div>
                                    <div class="cards">
                                        <div class="icon ocorrencias">
                                            <i class="fa-solid fa-chalkboard-user"></i>
                                        </div>
                                        <div class="desc">
                                            <h6 class="text-muted"><strong>Ocorr√™ncias </strong></h6>
                                            <h5 class="">140 ocorr√™ncias</h5>
                                        </div>
                                    </div>
                                    <div class="cards">
                                        <div class="icon onibus">
                                            <i class="fa-solid fa-bus"></i>
                                        </div>
                                        <div class="desc">
                                            <h6 class="text-muted"><strong>√înibus </strong></h6>
                                            <h5 class="">85 √¥nibus</h5>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    

                    <!-- EMEB CHIOZO -->
                    <!-- EMEB CHIOZO ALUNOS-->    
                    <div id="ChiozoAlunos" class="tab-pane fade">
                        <h3>üéâ Seja bem-vindo √† Central de √¥nibus da EMEB Chiozo! üè´üöå</h3>
                        
                        <p>
                            Nesta central, voc√™ poder√° visualizar todos os √¥nibus relacionados √† <strong>EMEB Chiozo</strong> e acompanhar a lista de alunos transportados. 
                            Atualmente, esta p√°gina apresenta <strong>quatro √¥nibus escolares</strong>, cada um com seus respectivos alunos.
                        </p>

                        <p><strong>üöç √înibus cadastrados:</strong></p>
                        <ul>
                            <li>üî¥ <strong>CVB-8642</strong></li>
                        </ul>

                        <p>
                            Al√©m da visualiza√ß√£o, aqui voc√™ tamb√©m pode <strong>adicionar, remover e mover alunos</strong> entre os √¥nibus, garantindo um melhor gerenciamento do transporte escolar.
                        </p>

                        <p><strong>üöÄ Facilidade e controle na palma da sua m√£o!</strong></p>

                        <!-- Bot√£o para abrir o formul√°rio -->
                        <button class="btn btn-primary mt-3" onclick="toggleFormChiozo()">‚ûï Adicionar Aluno</button>

                        <!-- Formul√°rio colaps√°vel -->
                        <div id="formAlunoChiozo" class="mt-3 collapse">
                            <div class="card card-body">
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label>Nome:</label>
                                        <input type="text" id="nomeChiozo" class="form-control">
                                    </div>
                                    <div class="col-md-6">
                                        <label>Respons√°vel:</label>
                                        <input type="text" id="responsavelChiozo" class="form-control">
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label>Telefone:</label>
                                        <input type="text" id="telefoneChiozo" class="form-control">
                                    </div>
                                    <div class="col-md-6">
                                        <label>Endere√ßo:</label>
                                        <input type="text" id="enderecoChiozo" class="form-control">
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label>Idade:</label>
                                        <input type="text" id="idadeChiozo" class="form-control">
                                    </div>
                                    <div class="col-md-6">
                                        <label>S√©rie:</label>
                                        <input type="text" id="serieChiozo" class="form-control">
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label>Per√≠odo:</label>
                                        <select id="periodoChiozo" class="form-control">
                                            <option>Matutino</option>
                                            <option>Vespertino</option>
                                            <option>Intermedi√°rio</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label>√înibus:</label>
                                        <select id="onibusChiozo" class="form-control">
                                            <option value="CVB-8642">CVB-8642</option>
                                            <!-- Pode adicionar os outros √¥nibus conforme necessidade -->
                                        </select>
                                    </div>
                                </div>
                                <button class="btn btn-success mt-2" onclick="adicionarAlunoChiozo()">Adicionar</button>
                            </div>
                        </div>

                        <!-- Texto com placa + bot√£o de colapso -->
                        <div 
                            id="ChiozoHeader"
                            onclick="toggleCollapseChiozo()" 
                            style="cursor: pointer; display: flex; align-items: center; justify-content: space-between; background-color: #e9ecef; padding: 15px; border-radius: 8px; margin-top: 20px; font-size: 1.2rem; font-weight: bold; color: #333;">
                            <span>üî¥ Ve√≠culo: CVB-8642</span>
                            <i class="fa-solid fa-chevron-down seta-icon" style="transition: transform 0.3s;"></i>
                        </div>

                        <!-- Tabela dentro do colapso -->
                        <div id="ChiozoTable" class="collapse">
                            <div class="table-responsive">
                                <table class="table table-bordered mt-3">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Nome</th>
                                            <th>Respons√°vel</th>
                                            <th>Telefone</th>
                                            <th>Endere√ßo</th>
                                            <th>Idade</th>
                                            <th>S√©rie</th>
                                            <th>Per√≠odo</th>
                                            <th>A√ß√£o</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Jo√£o Silva</td>
                                            <td>Nelci Fernandes</td>
                                            <td>(11) 98765-4321</td>
                                            <td>Rua das Flores, 123</td>
                                            <td>10 anos</td>
                                            <td>5¬™ S√©rie</td>
                                            <td>Matutino</td>
                                            <td class="text-center">
                                                <button class="btn btn-sm border-0 p-0" onclick="confirmarRemocao('Jo√£o Silva', this)">
                                                    <i class="fa-solid fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>    
                        </div>
                    </div>

                    <!-- Estilo adicional para girar o √≠cone -->
                    <style>
                        .ativo .seta-icon {
                            transform: rotate(180deg);
                        }
                    </style>

                    <script>
                        function toggleCollapseChiozo() {
                            let table = document.getElementById("ChiozoTable");
                            let header = document.getElementById("ChiozoHeader");
                            table.classList.toggle("show");
                            header.classList.toggle("ativo");
                        }

                        function toggleFormChiozo() {
                            const form = document.getElementById("formAlunoChiozo");
                            form.classList.toggle("show");
                        }

                        function adicionarAlunoChiozo() {
                            const nome = document.getElementById("nomeChiozo").value;
                            const responsavel = document.getElementById("responsavelChiozo").value;
                            const telefone = document.getElementById("telefoneChiozo").value;
                            const endereco = document.getElementById("enderecoChiozo").value;
                            const idade = document.getElementById("idadeChiozo").value;
                            const serie = document.getElementById("serieChiozo").value;
                            const periodo = document.getElementById("periodoChiozo").value;
                            const onibus = document.getElementById("onibusChiozo").value;

                            const tabela = document.querySelector("#ChiozoTable tbody");

                            const novaLinha = document.createElement("tr");
                            novaLinha.innerHTML = `
                                <td>${nome}</td>
                                <td>${responsavel}</td>
                                <td>${telefone}</td>
                                <td>${endereco}</td>
                                <td>${idade}</td>
                                <td>${serie}</td>
                                <td>${periodo}</td>
                                <td class="text-center">
                                    <button class="btn btn-sm border-0 p-0" onclick="confirmarRemocao('${nome}', this)">
                                        <i class="fa-solid fa-trash"></i>
                                    </button>
                                </td>
                            `;

                            tabela.appendChild(novaLinha);

                            // Limpa o formul√°rio e fecha
                            document.getElementById("formAlunoChiozo").classList.remove("show");
                            document.querySelectorAll("#formAlunoChiozo input, #formAlunoChiozo select").forEach(el => el.value = "");
                        }

                        function confirmarRemocao(nome, btn) {
                            if (confirm(`Deseja remover o aluno ${nome}?`)) {
                                const linha = btn.closest("tr");
                                linha.remove();
                            }
                        }
                    </script>



 
                     
                    <!-- EMEB CHIOZO OCORR√äNCIAS -->    
                    <div id="ChiozoOcorrencias" class="tab-pane fade">
                        <h3>üìå Ocorr√™ncias - EMEB Chiozo</h3>
                        <p>
                            Bem-vindo √† <strong>Central de Ocorr√™ncias</strong> da <strong>EMEB Chiozo</strong>! üéìüö∂<br>
                            Aqui, voc√™ pode registrar e consultar ocorr√™ncias relacionadas ao transporte escolar. 
                            Situa√ß√µes comuns incluem:
                        </p>
                        <ul style="text-align: left; display: inline-block;">
                            <li>üöå √înibus quebrado</li>
                            <li>‚è≥ Atraso excessivo</li>
                            <li>‚ö†Ô∏è √înibus n√£o compareceu</li>
                            <li>üí° Outros imprevistos</li>
                        </ul>
                        <p>
                            ‚ö†Ô∏è <strong>Aten√ß√£o!</strong> Ao criar uma ocorr√™ncia, informe a <strong>data e o hor√°rio</strong> 
                            do ocorrido (n√£o do momento do relato). 
                            Seja detalhado para que possamos resolver rapidamente! 
                        </p>

                        <!-- Bot√£o para adicionar nova ocorr√™ncia -->
                        <button class="btn btn-warning mb-3" onclick="exibirAlertOcorrenciaChiozo()">
                            <i class="fa-solid fa-plus"></i> Nova Ocorr√™ncia
                        </button>

                        <!-- Tabela de Ocorr√™ncias -->
                        <div class="table-responsive">
                        <table class="table table-bordered">
                            <thead class="table-dark">
                                <tr>
                                    <th>Data</th>
                                    <th>Hor√°rio</th>
                                    <th>Detalhes</th>
                                    <th>Arquivo</th>
                                    <th style="width: 40px;"><i class="fa-solid fa-spinner"></i></th>
                                    <th style="width: 40px;"><i class="fa-solid fa-comment"></i></th>
                                </tr>
                            </thead>                            
                            <tbody id="tabelaOcorrenciasChiozo">
                                <tr>
                                    <td>02/04/2025</td>
                                    <td>07:30</td>
                                    <td>Aluno atrasado no ponto.</td>
                                    <td>Nenhum arquivo</td>
                                    <td><i class="fa-solid fa-x text-danger" style="cursor: pointer;" onclick="alternarStatus(this)" title="Em andamento"></i></td>
                                    <td><i class="fa-solid fa-comment text-primary" style="cursor: pointer;" onclick="abrirComentarios(this)"></i></td>
                                </tr>
                                <tr>
                                    <td>03/04/2025</td>
                                    <td>12:15</td>
                                    <td>√înibus precisou de manuten√ß√£o no trajeto.</td>
                                    <td>Nenhum arquivo</td>
                                    <td><i class="fa-solid fa-x text-danger" style="cursor: pointer;" onclick="alternarStatus(this)" title="Em andamento"></i></td>
                                    <td><i class="fa-solid fa-comment text-primary" style="cursor: pointer;" onclick="abrirComentarios(this)"></i></td>
                                </tr>
                            </tbody>                                                        
                        </table>
                    </div>
                </div>
                    <!-- Alerta Personalizado -->
                    <div id="alertOcorrenciaChiozo" class="custom-alert">
                        <div class="alert-content">
                            <h4>Registrar Nova Ocorr√™ncia</h4>
                            <form id="formOcorrenciaChiozo">
                                <label>Data:</label>
                                <input type="date" id="inputData" class="form-control" required>

                                <label>Hor√°rio:</label>
                                <input type="time" id="inputHorario" class="form-control" required>

                                <label>Detalhes:</label>
                                <textarea id="inputDetalhes" class="form-control" rows="3" required></textarea>

                                <label>Arquivo (opcional):</label>
                                <input type="file" id="inputArquivo" class="form-control">


                                <div class="d-flex justify-content-between mt-3">
                                    <button type="button" class="btn btn-secondary" onclick="fecharAlertOcorrenciaChiozo()">Cancelar</button>
                                    <button type="submit" class="btn btn-warning">Salvar</button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <script>
                        function exibirAlertOcorrenciaChiozo() {
                            document.getElementById('alertOcorrenciaChiozo').style.display = 'block';
                        }

                        function fecharAlertOcorrenciaChiozo() {
                            document.getElementById('alertOcorrenciaChiozo').style.display = 'none';
                        }
                        document.getElementById("formOcorrenciaChiozo").addEventListener("submit", function(event) {
                        event.preventDefault();

                        let data = document.getElementById("inputData").value;
                        let horario = document.getElementById("inputHorario").value;
                        let detalhes = document.getElementById("inputDetalhes").value;
                        let arquivoInput = document.getElementById("inputArquivo");

                        let arquivoLink = "-";
                        if (arquivoInput.files.length > 0) {
                            let arquivo = arquivoInput.files[0];
                            let urlTemporaria = URL.createObjectURL(arquivo);
                            arquivoLink = `<a href="${urlTemporaria}" target="_blank">${arquivo.name}</a>`;
                        }

                        if (data && horario && detalhes) {
                            let dataBR = data.split("-").reverse().join("/");

                            let tabela = document.getElementById("tabelaOcorrenciasChiozo");
                            let novaLinha = tabela.insertRow();

                            novaLinha.innerHTML = `
                            <td>${dataBR}</td>
                            <td>${horario}</td>
                            <td>${detalhes}</td>
                            <td>${arquivoLink}</td>
                            <td><i class="fa-solid fa-x text-danger" style="cursor: pointer;" onclick="alternarStatus(this)" title="Em andamento"></i></td>
                            <td><i class="fa-solid fa-comment text-primary" style="cursor: pointer;" onclick="abrirComentarios(this)"></i></td>
                        `;


                            fecharAlertOcorrenciaChiozo();
                            document.getElementById("formOcorrenciaChiozo").reset();
                        }
                    });
                    function alternarStatus(icone) {
                    if (icone.classList.contains("fa-x")) {
                        icone.classList.remove("fa-x", "text-danger");
                        icone.classList.add("fa-circle-check", "text-success");
                        icone.title = "Resolvido";
                    } else {
                        icone.classList.remove("fa-circle-check", "text-success");
                        icone.classList.add("fa-x", "text-danger");
                        icone.title = "Em andamento";
                    }
                }
                    </script>
                    <div id="comentarioModal" class="custom-alert" style="display: none;">
                        <div class="alert-content">
                            <h4>Coment√°rios da Ocorr√™ncia</h4>
                            <div id="comentariosConteudo" style="max-height: 200px; overflow-y: auto; background: #f9f9f9; padding: 10px; border: 1px solid #ddd; margin-bottom: 10px;"></div>
                            
                            <textarea id="novoComentario" class="form-control" rows="2" placeholder="Digite seu coment√°rio..."></textarea>
                            
                            <div class="d-flex justify-content-between mt-3">
                                <button type="button" class="btn btn-secondary" onclick="fecharComentarios()">Fechar</button>
                                <button type="button" class="btn btn-warning" onclick="salvarComentario()">Enviar</button>
                            </div>
                        </div>
                    </div>
                    <script>
                        let comentariosPorLinha = new Map();
                        let linhaAtual = null;

                        function abrirComentarios(icone) {
                            const linha = icone.closest('tr');
                            linhaAtual = linha;

                            const index = linha.rowIndex - 1; // ajusta para o √≠ndice da tabela (ignora o cabe√ßalho)

                            const comentarios = comentariosPorLinha.get(index) || [];
                            const container = document.getElementById("comentariosConteudo");

                            container.innerHTML = comentarios.map(c => `<div>üó®Ô∏è ${c}</div>`).join("");
                            document.getElementById("comentarioModal").style.display = "block";
                        }

                        function fecharComentarios() {
                            document.getElementById("comentarioModal").style.display = "none";
                            document.getElementById("novoComentario").value = "";
                        }

                        function salvarComentario() {
                            const texto = document.getElementById("novoComentario").value.trim();
                            if (!texto || !linhaAtual) return;

                            const index = linhaAtual.rowIndex - 1;

                            const comentarios = comentariosPorLinha.get(index) || [];
                            comentarios.push(texto);
                            comentariosPorLinha.set(index, comentarios);

                            document.getElementById("novoComentario").value = "";
                            abrirComentarios(linhaAtual.querySelector("i")); // atualiza exibi√ß√£o
                        }
                    </script>


                    <!-- EMEB CHIOZO FREQU√äNCIA -->    
                    <div id="ChiozoFrequencia" class="tab-pane fade">
                        <h3>üìå Frequ√™ncia - EMEB Chiozo</h3>
                    <p>
                        Bem-vindo ao <strong>Registro de Frequ√™ncia</strong> da <strong>EMEB Chiozo</strong>! üìùüöå<br>
                        Nesta √°rea, voc√™ pode <strong>enviar os registros de frequ√™ncia</strong> do transporte escolar com os dados principais do trajeto.
                        Os envios devem conter:
                    </p>
                    <ul style="text-align: left; display: inline-block;">
                        <li>üè´ Nome da escola</li>
                        <li>üöç Placa do √¥nibus</li>
                        <li>üìÖ Per√≠odo (data de in√≠cio e fim)</li>
                        <li>üßë‚Äçüíº Nome do respons√°vel pelo preenchimento</li>
                        <li>üñºÔ∏è Imagem do comprovante de frequ√™ncia</li>
                    </ul>
                    <p>
                        ‚ö†Ô∏è <strong>Importante:</strong> <br>
                        - Certifique-se de preencher todas as informa√ß√µes corretamente antes de salvar.<br>
                        - A tabela abaixo ser√° atualizada com os dados informados ap√≥s o envio.<br>
                        - Ap√≥s uma semana do envio os dados somem, e as imagens ficam dispon√≠veis apenas no drive.
                    </p>

                        
                        <!-- Bot√£o para abrir o formul√°rio -->
                        <button onclick="document.getElementById('freqForm').style.display='block'" class="btn btn-primary">
                            <i class="fa-solid fa-plus"></i> Nova Frequ√™ncia
                        </button>

                        <!-- Formul√°rio (inicialmente oculto) -->
                        <!-- Formul√°rio (compacto) -->
                        <form id="freqForm" style="display:none; margin-top: 20px;" onsubmit="submitFrequencyForm(event)">
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label for="escola">Escola:</label>
                                    <input type="text" id="escola" class="form-control form-control-sm" required>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="placa">Placa do √¥nibus:</label>
                                    <input type="text" id="placa" class="form-control form-control-sm" required>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label for="dataInicio">Do dia:</label>
                                    <input type="date" id="dataInicio" class="form-control form-control-sm" required>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="dataFim">At√© o dia:</label>
                                    <input type="date" id="dataFim" class="form-control form-control-sm" required>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label for="feitoPor">Feito por:</label>
                                    <input type="text" id="feitoPor" class="form-control form-control-sm" required>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="imagem">Imagem da frequ√™ncia:</label>
                                    <input type="file" id="imagem" class="form-control form-control-sm" accept="image/*" required>
                                </div>
                            </div>
                        
                            <!-- Bot√µes -->
                            <div class="mt-3">
                                <button type="submit" class="btn btn-success btn-sm">Salvar</button>
                                <button type="button" class="btn btn-secondary btn-sm" onclick="cancelarFormulario()">Cancelar</button>
                            </div>
                        </form>


                        <!-- Tabela de registros (sempre vis√≠vel) -->
                        <table id="freqTable" class="table table-bordered table-striped mt-4">
                            <thead class="table-dark">
                                <tr>
                                    <th>Escola</th>
                                    <th>Placa</th>
                                    <th>Per√≠odo</th>
                                    <th>Feito por</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>

                    <script>
                    function submitFrequencyForm(event) {
                        event.preventDefault();

                        const escola = document.getElementById('escola').value;
                        const placa = document.getElementById('placa').value;
                        const dataInicio = document.getElementById('dataInicio').value;
                        const dataFim = document.getElementById('dataFim').value;
                        const feitoPor = document.getElementById('feitoPor').value;

                        const tbody = document.getElementById('freqTable').querySelector('tbody');
                        const tr = document.createElement('tr');

                        tr.innerHTML = `
                            <td>${escola}</td>
                            <td>${placa}</td>
                            <td>${dataInicio} at√© ${dataFim}</td>
                            <td>${feitoPor}</td>
                        `;

                        tbody.appendChild(tr);

                        // Limpa o formul√°rio
                        document.getElementById('freqForm').reset();
                        document.getElementById('freqForm').style.display = 'none';
                    }
                    function cancelarFormulario() {
                    document.getElementById('freqForm').reset();
                    document.getElementById('freqForm').style.display = 'none';
                }
                    </script>





                    <!-- EMEB ITALO ADAMI -->

                    <!--EMEB ITALO ADAMI ALUNOS-->    
                    <div id="ItaloAdamiAlunos" class="tab-pane fade">
                        <h3>üéâ Seja bem-vindo √† Central de √¥nibus da EMEB Italo Adami! üè´üöå</h3>
                        
                        <p>
                            Nesta central, voc√™ poder√° visualizar todos os √¥nibus relacionados √† <strong>EMEB Italo Adami</strong> e acompanhar a lista de alunos transportados. 
                            Atualmente, esta p√°gina apresenta <strong>quatro √¥nibus escolares</strong>, cada um com seus respectivos alunos.
                        </p>

                        <p><strong>üöç √înibus cadastrados:</strong></p>
                        <ul>
                            <li>üü° <strong>FQJ-1215</strong></li>
                        </ul>

                        <p>
                            Al√©m da visualiza√ß√£o, aqui voc√™ tamb√©m pode <strong>adicionar, remover e mover alunos</strong> entre os √¥nibus, garantindo um melhor gerenciamento do transporte escolar.
                        </p>

                        <p><strong>üöÄ Facilidade e controle na palma da sua m√£o!</strong></p>  

                        <!-- Bot√£o para abrir o formul√°rio -->
                        <button class="btn btn-primary mt-3" onclick="toggleForm()">‚ûï Adicionar Aluno</button>

                        <!-- Formul√°rio colaps√°vel -->
                        <div id="formAluno" class="mt-3 collapse">
                            <div class="card card-body">
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label>Nome:</label>
                                        <input type="text" id="nome" class="form-control">
                                    </div>
                                    <div class="col-md-6">
                                        <label>Respons√°vel:</label>
                                        <input type="text" id="responsavel" class="form-control">
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label>Telefone:</label>
                                        <input type="text" id="telefone" class="form-control">
                                    </div>
                                    <div class="col-md-6">
                                        <label>Endere√ßo:</label>
                                        <input type="text" id="endereco" class="form-control">
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label>Idade:</label>
                                        <input type="text" id="idade" class="form-control">
                                    </div>
                                    <div class="col-md-6">
                                        <label>S√©rie:</label>
                                        <input type="text" id="serie" class="form-control">
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col-md-6">
                                        <label>Per√≠odo:</label>
                                        <select id="periodo" class="form-control">
                                            <option>Matutino</option>
                                            <option>Vespertino</option>
                                            <option>Intermedi√°rio</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label>√înibus:</label>
                                        <select id="onibus" class="form-control">
                                            <option value="FQJ-1215">FQJ-1215</option>
                                            <!-- Pode adicionar os outros √¥nibus conforme necessidade -->
                                        </select>
                                    </div>
                                </div>
                                <button class="btn btn-success mt-2" onclick="adicionarAluno()">Adicionar</button>
                            </div>
                        </div>

                        <!-- Texto com placa + bot√£o de colapso -->
                        <div 
                            id="ItaloHeader"
                            onclick="toggleCollapseItalo()" 
                            style="cursor: pointer; display: flex; align-items: center; justify-content: space-between; background-color: #e9ecef; padding: 15px; border-radius: 8px; margin-top: 20px; font-size: 1.2rem; font-weight: bold; color: #333;">
                            <span>üü° Ve√≠culo: FQJ-1215</span>
                            <i class="fa-solid fa-chevron-down seta-icon" style="transition: transform 0.3s;"></i>
                        </div>

                        <!-- Tabela dentro do colapso -->
                        <div id="ItaloTable" class="collapse">
                            <div class="table-responsive">
                                <table class="table table-bordered mt-3">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Nome</th>
                                            <th>Respons√°vel</th>
                                            <th>Telefone</th>
                                            <th>Endere√ßo</th>
                                            <th>Idade</th>
                                            <th>S√©rie</th>
                                            <th>Per√≠odo</th>
                                            <th>A√ß√£o</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Jo√£o Silva</td>
                                            <td>Nelci Fernandes</td>
                                            <td>(11) 98765-4321</td>
                                            <td>Rua das Flores, 123</td>
                                            <td>10 anos</td>
                                            <td>5¬™ S√©rie</td>
                                            <td>Matutino</td>
                                            <td class="text-center">
                                                <button class="btn btn-sm border-0 p-0" onclick="confirmarRemocao('Jo√£o Silva', this)">
                                                    <i class="fa-solid fa-trash"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>    
                        </div>
                    </div>

                    <!-- Estilo da setinha (reaproveit√°vel) -->
                    <style>
                        .ativo .seta-icon {
                            transform: rotate(180deg);
                        }
                    </style>
                    <script>
                        function toggleForm() {
                            const form = document.getElementById("formAluno");
                            form.classList.toggle("show");
                        }
                    
                        function adicionarAluno() {
                            const nome = document.getElementById("nome").value;
                            const responsavel = document.getElementById("responsavel").value;
                            const telefone = document.getElementById("telefone").value;
                            const endereco = document.getElementById("endereco").value;
                            const idade = document.getElementById("idade").value;
                            const serie = document.getElementById("serie").value;
                            const periodo = document.getElementById("periodo").value;
                            const onibus = document.getElementById("onibus").value;
                    
                            const tabela = document.querySelector("#ItaloTable tbody");
                    
                            const novaLinha = document.createElement("tr");
                            novaLinha.innerHTML = `
                                <td>${nome}</td>
                                <td>${responsavel}</td>
                                <td>${telefone}</td>
                                <td>${endereco}</td>
                                <td>${idade}</td>
                                <td>${serie}</td>
                                <td>${periodo}</td>
                                <td class="text-center">
                                    <button class="btn btn-sm border-0 p-0" onclick="confirmarRemocao('${nome}', this)">
                                        <i class="fa-solid fa-trash"></i>
                                    </button>
                                </td>
                            `;
                    
                            tabela.appendChild(novaLinha);
                    
                            // Limpa o formul√°rio e fecha
                            document.getElementById("formAluno").classList.remove("show");
                            document.querySelectorAll("#formAluno input, #formAluno select").forEach(el => el.value = "");
                        }
                    
                        function confirmarRemocao(nome, btn) {
                            if (confirm(`Deseja remover o aluno ${nome}?`)) {
                                const linha = btn.closest("tr");
                                linha.remove();
                            }
                        }
                    </script>

                    <script>
                        function toggleCollapseItalo() {
                            let table = document.getElementById("ItaloTable");
                            let header = document.getElementById("ItaloHeader");
                            table.classList.toggle("show");
                            header.classList.toggle("ativo");
                        }
                    </script>
                
 
                    <!-- EMEB ITALO ADAMI OCORR√äNCIAS -->    
                    <div id="ItaloAdamiOcorrencias" class="tab-pane fade">
                        <h3>üìå Ocorr√™ncias - EMEB Italo Adami</h3>
                        <p>
                            Bem-vindo √† <strong>Central de Ocorr√™ncias</strong> da <strong>EMEB Italo Adami</strong>! üéìüöå<br>
                            Aqui voc√™ pode registrar e consultar ocorr√™ncias no transporte escolar:
                        </p>
                        <ul style="text-align: left; display: inline-block;">
                            <li>üöå √înibus quebrado</li>
                            <li>‚è≥ Atraso excessivo</li>
                            <li>‚ö†Ô∏è √înibus n√£o compareceu</li>
                            <li>üí° Outros imprevistos</li>
                        </ul>
                        <p>
                            ‚ö†Ô∏è <strong>Aten√ß√£o:</strong> Informe a <strong>data e hor√°rio</strong> do ocorrido. Seja o mais claro poss√≠vel!
                        </p>
                    
                        <button class="btn btn-warning mb-3" onclick="exibirAlertOcorrenciaItalo()">
                            <i class="fa-solid fa-plus"></i> Nova Ocorr√™ncia
                        </button>
                    
                        <div class="table-responsive">
                            <table class="table table-bordered">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Data</th>
                                        <th>Hor√°rio</th>
                                        <th>Detalhes</th>
                                        <th>Arquivo</th>
                                        <th style="width: 40px;"><i class="fa-solid fa-spinner"></i></th>
                                        <th style="width: 40px;"><i class="fa-solid fa-comment"></i></th>
                                    </tr>
                                </thead>
                                <tbody id="tabelaOcorrenciasItalo"></tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Modal de Nova Ocorr√™ncia -->
                    <div id="alertOcorrenciaItalo" class="custom-alert">
                        <div class="alert-content">
                            <h4>Registrar Nova Ocorr√™ncia</h4>
                            <form id="formOcorrenciaItalo">
                                <label>Data:</label>
                                <input type="date" id="dataItalo" class="form-control" required>
                    
                                <label>Hor√°rio:</label>
                                <input type="time" id="horarioItalo" class="form-control" required>
                    
                                <label>Detalhes:</label>
                                <textarea id="detalhesItalo" class="form-control" rows="3" required></textarea>
                    
                                <label>Arquivo (opcional):</label>
                                <input type="file" id="arquivoItalo" class="form-control">
                    
                                <div class="d-flex justify-content-between mt-3">
                                    <button type="button" class="btn btn-secondary" onclick="fecharAlertOcorrenciaItalo()">Cancelar</button>
                                    <button type="submit" class="btn btn-warning">Salvar</button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <script>
                        function exibirAlertOcorrenciaItalo() {
                            document.getElementById('alertOcorrenciaItalo').style.display = 'block';
                        }
                    
                        function fecharAlertOcorrenciaItalo() {
                            document.getElementById('alertOcorrenciaItalo').style.display = 'none';
                        }
                    
                        document.getElementById("formOcorrenciaItalo").addEventListener("submit", function(event) {
                            event.preventDefault();
                    
                            let data = document.getElementById("dataItalo").value;
                            let horario = document.getElementById("horarioItalo").value;
                            let detalhes = document.getElementById("detalhesItalo").value;
                            let arquivoInput = document.getElementById("arquivoItalo");
                    
                            let arquivoLink = "Nenhum arquivo";
                            if (arquivoInput.files.length > 0) {
                                let arquivo = arquivoInput.files[0];
                                let urlTemporaria = URL.createObjectURL(arquivo);
                                arquivoLink = `<a href="${urlTemporaria}" target="_blank">${arquivo.name}</a>`;
                            }
                    
                            if (data && horario && detalhes) {
                                let dataBR = data.split("-").reverse().join("/");
                    
                                let tabela = document.getElementById("tabelaOcorrenciasItalo");
                                let novaLinha = tabela.insertRow();
                    
                                novaLinha.innerHTML = `
                                    <td>${dataBR}</td>
                                    <td>${horario}</td>
                                    <td>${detalhes}</td>
                                    <td>${arquivoLink}</td>
                                    <td><i class="fa-solid fa-x text-danger" style="cursor: pointer;" onclick="alternarStatus(this)" title="Em andamento"></i></td>
                                    <td><i class="fa-solid fa-comment text-primary" style="cursor: pointer;" onclick="abrirComentarios(this)"></i></td>
                                `;
                    
                                fecharAlertOcorrenciaItalo();
                                document.getElementById("formOcorrenciaItalo").reset();
                            }
                        });
                    </script>


                    <!-- EMEB ITALO ADAMI FREQU√äNCIA -->    
                    <div id="ItaloAdamiFrequencia" class="tab-pane fade">
                        <h3>üìå Frequ√™ncia - EMEB Italo Adami</h3>
                        <p>
                            Aqui voc√™ pode registrar as frequ√™ncias do transporte escolar da <strong>EMEB Italo Adami</strong>. Preencha:
                        </p>
                        <ul style="text-align: left; display: inline-block;">
                            <li>üè´ Nome da escola</li>
                            <li>üöç Placa do √¥nibus</li>
                            <li>üìÖ Per√≠odo</li>
                            <li>üßë‚Äçüíº Nome do respons√°vel</li>
                            <li>üñºÔ∏è Imagem da frequ√™ncia</li>
                        </ul>
                    
                        <p>
                            ‚ö†Ô∏è <strong>Importante:</strong> <br>
                            - Certifique-se de preencher todas as informa√ß√µes corretamente antes de salvar.<br>
                            - A tabela abaixo ser√° atualizada com os dados informados ap√≥s o envio.<br>
                            - Ap√≥s uma semana do envio os dados somem, e as imagens ficam dispon√≠veis apenas no drive.
                        </p>
    
                            
                            <!-- Bot√£o para abrir o formul√°rio -->
                            <button onclick="document.getElementById('formFreqItalo').style.display='block'" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Nova Frequ√™ncia
                            </button>
                    
                        <form id="formFreqItalo" style="display:none; margin-top: 20px;" onsubmit="submitFreqItalo(event)">
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label for="escolaItalo">Escola:</label>
                                    <input type="text" id="escolaItalo" class="form-control" required>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="placaItalo">Placa do √¥nibus:</label>
                                    <input type="text" id="placaItalo" class="form-control" required>
                                </div>
                            </div>
                    
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label for="inicioItalo">Do dia:</label>
                                    <input type="date" id="inicioItalo" class="form-control" required>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="fimItalo">At√© o dia:</label>
                                    <input type="date" id="fimItalo" class="form-control" required>
                                </div>
                            </div>
                    
                            <div class="row">
                                <div class="form-group col-md-6">
                                    <label for="responsavelItalo">Feito por:</label>
                                    <input type="text" id="responsavelItalo" class="form-control" required>
                                </div>
                                <div class="form-group col-md-6">
                                    <label for="imgFreqItalo">Imagem da frequ√™ncia:</label>
                                    <input type="file" id="imgFreqItalo" class="form-control" accept="image/*" required>
                                </div>
                            </div>
                    
                            <button type="submit" class="btn btn-success mt-2">Salvar</button>
                            <button type="button" class="btn btn-secondary mt-2 ml-2" onclick="cancelarFormFreqItalo()">Cancelar</button>
                        </form>
                    
                        <table id="tabelaFreqItalo" class="table table-bordered table-striped mt-4">
                            <thead class="table-dark">
                                <tr>
                                    <th>Escola</th>
                                    <th>Placa</th>
                                    <th>Per√≠odo</th>
                                    <th>Feito por</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </div>
                    <script>
                        function submitFreqItalo(event) {
                            event.preventDefault();
                    
                            const escola = document.getElementById('escolaItalo').value;
                            const placa = document.getElementById('placaItalo').value;
                            const inicio = document.getElementById('inicioItalo').value;
                            const fim = document.getElementById('fimItalo').value;
                            const responsavel = document.getElementById('responsavelItalo').value;
                    
                            const tbody = document.getElementById('tabelaFreqItalo').querySelector('tbody');
                            const tr = document.createElement('tr');
                    
                            tr.innerHTML = `
                                <td>${escola}</td>
                                <td>${placa}</td>
                                <td>${inicio} at√© ${fim}</td>
                                <td>${responsavel}</td>
                            `;
                    
                            tbody.appendChild(tr);
                    
                            document.getElementById('formFreqItalo').reset();
                            document.getElementById('formFreqItalo').style.display = 'none';
                        }
                        function cancelarFormFreqItalo() {
                        document.getElementById('formFreqItalo').reset();
                        document.getElementById('formFreqItalo').style.display = 'none';
                    }
                    </script>



                    
            </div>   
</div>
        </div>
    </div>

    <script>
        document.querySelectorAll('.tab-link').forEach(link => {
    link.addEventListener('click', function () {
        let tabId = this.getAttribute('data-tab');

        document.querySelectorAll('.tab-pane').forEach(tab => {
            tab.classList.remove('show', 'active');
        });

        document.getElementById(tabId).classList.add('show', 'active');
    });
});


    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/script.js"></script>
</body>
</html>
